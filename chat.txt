以下是针对知识图谱数据的常用查询示例，涵盖数据验证、关系分析和图谱探索等多个方面：

​1. 基础验证类查询

cypher
-- 检查残留自环（应急验证）
MATCH (a)-[r]->(a)
RETURN a.name AS nodeName, type(r) AS relType, count(r) AS occurrences
LIMIT 100

-- 验证节点唯一性约束（按标签统计重复项）
MATCH (n:Framework)
WITH n.name AS name, count(*) AS cnt
WHERE cnt > 1
RETURN name, cnt

-- 查找空属性节点
MATCH (n) 
WHERE size(keys(n)) = 0
RETURN labels(n) AS nodeType, count(*)
​2. 关系分析类查询

cypher
-- 查找重复关系（相同类型和方向）
MATCH (a)-[r]->(b)
WITH a, b, type(r) AS relType, count(*) AS cnt
WHERE cnt > 1
RETURN a.name, relType, b.name, cnt
LIMIT 50

-- 统计各类型关系分布
CALL db.relationshipTypes() YIELD relationshipType
MATCH ()-[r]->()
WHERE type(r) = relationshipType
RETURN relationshipType, count(r) AS count 
ORDER BY count DESC

-- 检测单向关系（缺少反向关系）
MATCH (a)-[r]->(b)
WHERE NOT exists((b)-[:`${type(r)}`]->(a))
RETURN a.name, type(r), b.name
LIMIT 50
​3. 图谱探索类查询

cypher
-- 查找中心节点（高连接度）
MATCH (n)-[r]-()
RETURN n.name AS node, count(r) AS degree 
ORDER BY degree DESC 
LIMIT 20

-- 路径发现（跨类别关联）
MATCH path=(:Framework)-[*1..3]->(:Policy)
WHERE none(r IN relationships(path) WHERE startNode(r)=endNode(r))
RETURN path
LIMIT 10

-- 社区发现（共同关联节点）
MATCH (a:Framework)<--(x)-->(b:Policy)
WHERE a.name <> b.name
RETURN a.name, b.name, count(x) AS sharedConnections 
ORDER BY sharedConnections DESC
LIMIT 20
​4. 数据质量深度检查

cypher
-- 检测名称异常字符（正则表达式过滤）
MATCH (n)
WHERE n.name =~ '.*[^a-z0-9\\- ].*' 
RETURN labels(n) AS nodeType, n.name
LIMIT 50

-- 验证标签一致性（跨标签同名节点）
MATCH (a), (b)
WHERE a.name = b.name AND labels(a) <> labels(b)
RETURN a.name, labels(a), labels(b)

-- 统计孤立节点（无任何关系）
MATCH (n)
WHERE NOT (n)--()
RETURN labels(n) AS nodeType, count(*)
​5. 性能监控类查询

cypher
-- 查看索引使用情况
CALL db.indexes()

-- 统计数据库概要
CALL db.schema.visualization()

-- 分析存储占用
CALL db.propertyKeys() 
YIELD propertyKey
MATCH (n)
WHERE n[propertyKey] IS NOT NULL
RETURN propertyKey, count(n) AS nodesWithProperty, sum(size(n[propertyKey])) AS totalStorage
​使用技巧

​可视化调试：在Neo4j Browser中点击节点/关系查看属性
​参数化查询：用 $param 语法创建可复用模板
cypher
:param nameFilter => "iso*"
MATCH (n) WHERE n.name STARTS WITH $nameFilter RETURN n
​性能优化：对大结果集使用 PROFILE 或 EXPLAIN 分析执行计划
​典型输出示例

节点类型	异常关系数	最常见关联类型
Framework	12	IMPLEMENTS (45%)
Policy	5	REFERENCES (62%)
根据实际数据模型调整标签和关系类型名称即可使用这些查询模板。
