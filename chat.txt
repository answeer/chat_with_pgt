from jsonpath_ng import parse

def extract_json_data(data, jsonpath_expr):
    """根据路径明确性返回单值或列表"""
    expr = parse(jsonpath_expr)
    matches = [match.value for match in expr.find(data)]
    
    # 判断是否为明确路径
    is_explicit_path = ('*' not in jsonpath_expr) and ('..' not in jsonpath_expr)
    
    if is_explicit_path and len(matches) == 1:
        return matches[0]  # 返回单值
    else:
        return matches     # 返回列表
