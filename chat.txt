import matplotlib.pyplot as plt
import numpy as np

def plot_cpu_utilization(cpu_usage, actual_exec_time, interval=0.1):
    # Smooth the CPU usage data
    smoothed_cpu_usage = np.convolve(cpu_usage, np.ones(5)/5, mode='valid')

    # Generate x-values based on the smoothed cpu usage length and the actual execution time
    number_of_samples = len(smoothed_cpu_usage)
    
    # Calculate the time range: The x-axis will represent real execution time
    total_duration = min(actual_exec_time, len(cpu_usage) * interval)  # Ensure we do not exceed actual exec time
    x_values = np.linspace(0, total_duration, number_of_samples)
    
    plt.figure(figsize=(10, 6))
    plt.plot(x_values, smoothed_cpu_usage, label="CPU Utilization", color='blue', linewidth=2)
    
    plt.title("CPU Utilization Over Time")
    plt.xlabel("Time (s)", fontsize=12)  # Updated to reflect actual time
    plt.ylabel("CPU Usage (%)", fontsize=12)
    plt.grid()
    plt.legend()
    plt.show()
